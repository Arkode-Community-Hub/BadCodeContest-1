%line 146+1 src/main.asm
[global _start]
_start:
%line 112+1 src/main.asm
 sub rsp, 8
 mov qword [rsp], rax
%line 112+1 src/main.asm
 sub rsp, 8
 mov qword [rsp], rdi
%line 112+1 src/main.asm
 sub rsp, 8
 mov qword [rsp], rsi
%line 112+1 src/main.asm
 sub rsp, 8
 mov qword [rsp], rdx
%line 26+1 src/main.asm
 mov rax, 1
 mov rdi, rax
 mov rsi, w1
 mov rdx, len_w1
 syscall
%line 129+1 src/main.asm
 mov rdx, qword [rsp]
 sub rsp, -8
%line 129+1 src/main.asm
 mov rsi, qword [rsp]
 sub rsp, -8
%line 129+1 src/main.asm
 mov rdi, qword [rsp]
 sub rsp, -8
%line 129+1 src/main.asm
 mov rax, qword [rsp]
 sub rsp, -8
%line 112+1 src/main.asm
 sub rsp, 8
 mov qword [rsp], rax
%line 112+1 src/main.asm
 sub rsp, 8
 mov qword [rsp], rdi
%line 112+1 src/main.asm
 sub rsp, 8
 mov qword [rsp], rsi
%line 112+1 src/main.asm
 sub rsp, 8
 mov qword [rsp], rdx
%line 26+1 src/main.asm
 mov rax, 1
 mov rdi, rax
 mov rsi, w2
 mov rdx, len_w2
 syscall
%line 129+1 src/main.asm
 mov rdx, qword [rsp]
 sub rsp, -8
%line 129+1 src/main.asm
 mov rsi, qword [rsp]
 sub rsp, -8
%line 129+1 src/main.asm
 mov rdi, qword [rsp]
 sub rsp, -8
%line 129+1 src/main.asm
 mov rax, qword [rsp]
 sub rsp, -8
%line 112+1 src/main.asm
 sub rsp, 8
 mov qword [rsp], rax
%line 112+1 src/main.asm
 sub rsp, 8
 mov qword [rsp], rdi
%line 112+1 src/main.asm
 sub rsp, 8
 mov qword [rsp], rsi
%line 112+1 src/main.asm
 sub rsp, 8
 mov qword [rsp], rdx
%line 26+1 src/main.asm
 mov rax, 1
 mov rdi, rax
 mov rsi, w3
 mov rdx, len_w3
 syscall
%line 129+1 src/main.asm
 mov rdx, qword [rsp]
 sub rsp, -8
%line 129+1 src/main.asm
 mov rsi, qword [rsp]
 sub rsp, -8
%line 129+1 src/main.asm
 mov rdi, qword [rsp]
 sub rsp, -8
%line 129+1 src/main.asm
 mov rax, qword [rsp]
 sub rsp, -8
%line 112+1 src/main.asm
 sub rsp, 8
 mov qword [rsp], rax
%line 112+1 src/main.asm
 sub rsp, 8
 mov qword [rsp], rdi
%line 112+1 src/main.asm
 sub rsp, 8
 mov qword [rsp], rsi
%line 112+1 src/main.asm
 sub rsp, 8
 mov qword [rsp], rdx
%line 26+1 src/main.asm
 mov rax, 1
 mov rdi, rax
 mov rsi, w4
 mov rdx, len_w4
 syscall
%line 129+1 src/main.asm
 mov rdx, qword [rsp]
 sub rsp, -8
%line 129+1 src/main.asm
 mov rsi, qword [rsp]
 sub rsp, -8
%line 129+1 src/main.asm
 mov rdi, qword [rsp]
 sub rsp, -8
%line 129+1 src/main.asm
 mov rax, qword [rsp]
 sub rsp, -8
%line 112+1 src/main.asm
 sub rsp, 8
 mov qword [rsp], rax
%line 112+1 src/main.asm
 sub rsp, 8
 mov qword [rsp], rdi
%line 112+1 src/main.asm
 sub rsp, 8
 mov qword [rsp], rsi
%line 112+1 src/main.asm
 sub rsp, 8
 mov qword [rsp], rdx
%line 26+1 src/main.asm
 mov rax, 1
 mov rdi, rax
 mov rsi, w5
 mov rdx, len_w5
 syscall
%line 129+1 src/main.asm
 mov rdx, qword [rsp]
 sub rsp, -8
%line 129+1 src/main.asm
 mov rsi, qword [rsp]
 sub rsp, -8
%line 129+1 src/main.asm
 mov rdi, qword [rsp]
 sub rsp, -8
%line 129+1 src/main.asm
 mov rax, qword [rsp]
 sub rsp, -8
%line 112+1 src/main.asm
 sub rsp, 8
 mov qword [rsp], rax
%line 112+1 src/main.asm
 sub rsp, 8
 mov qword [rsp], rdi
%line 112+1 src/main.asm
 sub rsp, 8
 mov qword [rsp], rsi
%line 112+1 src/main.asm
 sub rsp, 8
 mov qword [rsp], rdx
%line 26+1 src/main.asm
 mov rax, 1
 mov rdi, rax
 mov rsi, w6
 mov rdx, len_w6
 syscall
%line 129+1 src/main.asm
 mov rdx, qword [rsp]
 sub rsp, -8
%line 129+1 src/main.asm
 mov rsi, qword [rsp]
 sub rsp, -8
%line 129+1 src/main.asm
 mov rdi, qword [rsp]
 sub rsp, -8
%line 129+1 src/main.asm
 mov rax, qword [rsp]
 sub rsp, -8
%line 112+1 src/main.asm
 sub rsp, 8
 mov qword [rsp], rax
%line 112+1 src/main.asm
 sub rsp, 8
 mov qword [rsp], rdi
%line 112+1 src/main.asm
 sub rsp, 8
 mov qword [rsp], rsi
%line 112+1 src/main.asm
 sub rsp, 8
 mov qword [rsp], rdx
%line 26+1 src/main.asm
 mov rax, 1
 mov rdi, rax
 mov rsi, w7
 mov rdx, len_w7
 syscall
%line 129+1 src/main.asm
 mov rdx, qword [rsp]
 sub rsp, -8
%line 129+1 src/main.asm
 mov rsi, qword [rsp]
 sub rsp, -8
%line 129+1 src/main.asm
 mov rdi, qword [rsp]
 sub rsp, -8
%line 129+1 src/main.asm
 mov rax, qword [rsp]
 sub rsp, -8
%line 13+1 src/main.asm
 mov [tmp0], rax
 sub rax, rax
 mov rax, [tmp0]
%line 112+1 src/main.asm
 sub rsp, 8
 mov qword [rsp], ce_1
%line 137+1 src/main.asm
 jmp trolle1
 ce_1:
 mov rax, qword [tmp7]
%line 156+1 src/main.asm
 mov rax, 0
 mov rdi, rax
 mov rsi, tmp0
 mov rdx, 1
 syscall
%line 13+1 src/main.asm
 mov [tmp0], rax
 sub rax, rax
 mov rax, [tmp0]
%line 112+1 src/main.asm
 sub rsp, 8
 mov qword [rsp], ce_2
%line 137+1 src/main.asm
 jmp trolle2
 ce_2:
 mov rax, qword [tmp7]
%line 162+1 src/main.asm
 mov rax, 60
 syscall
trolle1:
 mov rcx, 0
 jmp trolle1_loop
trolle1_loop:
 mov rax, 0
 mov rdi, rax
 mov rsi, tmp0
 mov rdx, 1
 syscall
 sub rax, -1
 jz trolle1_end
 mov al, [tmp0]
 sub al, byte 'R'
 jz trolle1_end
 mov al, [tmp0]
 mov rcx, [tmp1]
 mov byte [program + rcx], al
 sub rcx, -1
 mov [tmp1], rcx
 jmp trolle1_loop
trolle1_end:
%line 112+1 src/main.asm
 sub rsp, 8
 mov qword [rsp], rax
%line 112+1 src/main.asm
 sub rsp, 8
 mov qword [rsp], rdi
%line 112+1 src/main.asm
 sub rsp, 8
 mov qword [rsp], rsi
%line 112+1 src/main.asm
 sub rsp, 8
 mov qword [rsp], rdx
%line 26+1 src/main.asm
 mov rax, 1
 mov rdi, rax
 mov rsi, execbf
 mov rdx, len_execbf
 syscall
%line 129+1 src/main.asm
 mov rdx, qword [rsp]
 sub rsp, -8
%line 129+1 src/main.asm
 mov rsi, qword [rsp]
 sub rsp, -8
%line 129+1 src/main.asm
 mov rdi, qword [rsp]
 sub rsp, -8
%line 129+1 src/main.asm
 mov rax, qword [rsp]
 sub rsp, -8
%line 142+1 src/main.asm
 mov qword [tmp7], rax
%line 129+1 src/main.asm
 mov rcx, qword [rsp]
 sub rsp, -8
%line 144+1 src/main.asm
 jmp rcx
%line 187+1 src/main.asm
trolle2:
 mov word [currptr ], 0
 mov qword [currprptr], 0

 jmp trolle2_loop
trolle2_loop:
 mov rcx, 0
 mov cx, word [currprptr]
 sub cx, 65535
 jz trolle2_end
 mov rcx, 0
 mov cx, word [currprptr]
 mov al, [program + rcx]
 sub al, byte '+'
 jz trolle2_loopadd
 jmp trolle2_loop1
trolle2_loop1:
 mov rcx, 0
 mov cx, word [currprptr]
 mov al, [program + rcx]
 sub al, byte '-'
 jz trolle2_loopsub
 jmp trolle2_loop2
trolle2_loop2:
 mov rcx, 0
 mov cx, word [currprptr]
 mov al, [program + rcx]
 sub al, byte '>'
 jz trolle2_loopinc
 jmp trolle2_loop3
trolle2_loop3:
 mov rcx, 0
 mov cx, word [currprptr]
 mov al, [program + rcx]
 sub al, byte '<'
 jz trolle2_loopdec
 jmp trolle2_loop4
trolle2_loop4:
 mov rcx, 0
 mov cx, word [currprptr]
 mov al, [program + rcx]
 sub al, byte '.'
 jz trolle2_loopprnt
 jmp trolle2_loop5
trolle2_loop5:
 mov rcx, 0
 mov cx, [currprptr]
 mov al, [program + rcx]
 sub al, byte ','
 jz trolle2_loopread
 jmp trolle2_loop6
trolle2_loop6:
 mov rcx, 0
 mov cx, word [currprptr]
 mov al, [program + rcx]
 sub al, byte '['
 jz trolle2_loopbropen
 jmp trolle2_loop7
trolle2_loop7:
 mov rcx, 0
 mov cx, word [currprptr]
 mov al, [program + rcx]
 sub al, byte ']'
 jz trolle2_loopbrclose
 jmp trolle2_loop_end
trolle2_loop_end:
 sub word [currprptr], -1
 jmp trolle2_loop
trolle2_end:
 mov rax, 60
 syscall









trolle2_loopadd:
 mov ax, word [currptr]
 sub byte [tape + rax], -1
 jmp trolle2_loop1
trolle2_loopsub:
 mov ax, word [currptr]
 sub byte [tape + rax], 1
 jmp trolle2_loop2
trolle2_loopinc:
 sub word [currptr], -1
 jmp trolle2_loop3
trolle2_loopdec:
 sub word [currptr], 1
 jmp trolle2_loop4
trolle2_loopprnt:
 mov ax, word [currptr]
 mov al, byte [tape + rax]
 mov byte [tmpprnt], al
%line 112+1 src/main.asm
 sub rsp, 8
 mov qword [rsp], rax
%line 112+1 src/main.asm
 sub rsp, 8
 mov qword [rsp], rdi
%line 112+1 src/main.asm
 sub rsp, 8
 mov qword [rsp], rsi
%line 112+1 src/main.asm
 sub rsp, 8
 mov qword [rsp], rdx
%line 26+1 src/main.asm
 mov rax, 1
 mov rdi, rax
 mov rsi, tmpprnt
 mov rdx, len_tmpprnt
 syscall
%line 129+1 src/main.asm
 mov rdx, qword [rsp]
 sub rsp, -8
%line 129+1 src/main.asm
 mov rsi, qword [rsp]
 sub rsp, -8
%line 129+1 src/main.asm
 mov rdi, qword [rsp]
 sub rsp, -8
%line 129+1 src/main.asm
 mov rax, qword [rsp]
 sub rsp, -8
%line 286+1 src/main.asm

 jmp trolle2_loop5
trolle2_loopread:
 mov rax, 0
 mov rdi, rax
 mov rsi, tmpprnt
 mov rdx, 1
 syscall
 sub rax, -1
 jz trolle2_loopread
 mov rax, 0
 mov ax, word [currptr]
 mov bl, byte [tmpprnt]
 mov byte [tape + rax], bl
 jmp trolle2_loop6
trolle2_loopbropen:
 mov rax, 0
 mov ax, word [currptr]
 mov al, byte [tape + rax]
 sub al, 0
 jz trolle2_loopbropen_do
 jmp trolle2_loop7
trolle2_loopbropen_do:
 mov byte [currcnt], 0
 mov r8w, word [currprptr]
 jmp trolle2_loopbropen_do_loop
trolle2_loopbropen_do_loop:
 mov al, byte [program + r8]
 sub al, byte '['
 jz trolle2_loopbropen_do_loop_inc
 jmp trolle2_loopbropen_do_loop1
trolle2_loopbropen_do_loop1:
 mov al, byte [program + r8]
 sub al, byte ']'
 jz trolle2_loopbropen_do_loop_dec
 jmp trolle2_loopbropen_do_loop2
trolle2_loopbropen_do_loop2:
 sub r8w, -1
 sub byte [currcnt], 0
 jz trolle2_loopbropen_do_end
 jmp trolle2_loopbropen_do_loop

trolle2_loopbropen_do_loop_inc:
 sub byte [currcnt], -1
 jmp trolle2_loopbropen_do_loop1
trolle2_loopbropen_do_loop_dec:
 sub byte [currcnt], 1
 jmp trolle2_loopbropen_do_loop2
trolle2_loopbropen_do_end:
 sub r8w, -1
 mov word [currprptr], r8w
 jmp trolle2_loop7











trolle2_loopbrclose:
 mov rax, 0
 mov ax, word [currptr]
 mov al, byte [tape + rax]
 sub al, 0
 jz trolle2_loop_end
 jmp trolle2_loopbrclose_do
trolle2_loopbrclose_do:
 mov byte [currcnt], 0
 mov r8w, word [currprptr]
 jmp trolle2_loopbrclose_do_loop
trolle2_loopbrclose_do_loop:
 mov al, byte [program + r8]
 sub al, byte '['
 jz trolle2_loopbrclose_do_loop_inc
 jmp trolle2_loopbrclose_do_loop1
trolle2_loopbrclose_do_loop1:
 mov al, byte [program + r8]
 sub al, byte ']'
 jz trolle2_loopbrclose_do_loop_dec
 jmp trolle2_loopbrclose_do_loop2
trolle2_loopbrclose_do_loop2:
 sub r8w, 1
 sub byte [currcnt], 0
 jz trolle2_loopbrclose_do_end
 jmp trolle2_loopbrclose_do_loop

trolle2_loopbrclose_do_loop_inc:
 sub byte [currcnt], 1
 jmp trolle2_loopbrclose_do_loop1
trolle2_loopbrclose_do_loop_dec:
 sub byte [currcnt], -1
 jmp trolle2_loopbrclose_do_loop2
trolle2_loopbrclose_do_end:
 sub r8w, -1
 mov word [currprptr], r8w
 jmp trolle2_loop_end
[section .data]
tmpret: dq 0

tmp0: dq 0
tmp1: dq 0
tmp2: dq 0
tmp3: dq 0
tmp4: dq 0
tmp5: dq 0
tmp6: dq 0
tmp7: dq 0
currptr: dw 0
currprptr: dw 0
currcnt: db 0
tmpprnt: db 'A'
len_tmpprnt equ 1

[section .rodata]

%line 18+1 src/main.asm
 w1: db "+==============================================================================+", 10
 len_w1 equ $ - w1
%line 18+1 src/main.asm
 w2: db "|/			     Welcome to x85 BF interpreter!			   \|", 10
 len_w2 equ $ - w2
%line 18+1 src/main.asm
 w3: db "|#		     Please type some BF code, then type R then ENTER		   #|", 10
 len_w3 equ $ - w3
%line 18+1 src/main.asm
 w4: db "|#		Written by DevHONK for the Bad Code Competition 2022, Week 1	   #|", 10
 len_w4 equ $ - w4
%line 18+1 src/main.asm
 w5: db "|#			  64KB of tape free and 64KB of program free		   #|", 10
 len_w5 equ $ - w5
%line 18+1 src/main.asm
 w6: db "|\				  256 nested blocks free			   /|", 10
 len_w6 equ $ - w6
%line 18+1 src/main.asm
 w7: db "+==============================================================================+", 10
 len_w7 equ $ - w7
%line 412+1 src/main.asm

%line 18+1 src/main.asm
 execbf: db "Executing BrainFuck Program...", 10
 len_execbf equ $ - execbf
%line 414+1 src/main.asm
[section .bss]
tape: resb 65536
program: resb 65536



